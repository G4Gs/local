<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Instituto Local</title>
		{% block stylesheets %}
			<link rel="stylesheet" href="{{asset('css/all.css')}}">
			<link rel="stylesheet" href="{{asset('css/oter.css')}}">
			<link rel="stylesheet" href="{{asset('css/container.css')}}">
			<link rel="stylesheet" href="{{asset('css/styles.css')}}">
		{% endblock %}
	</head>
	<body id="page-top">
		<!-- Page Wrapper -->
		<div id="wrapper">
			<!-- Sidebar -->
			<ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

				<!-- Sidebar - Brand -->
				<a class="sidebar-brand d-flex align-items-center justify-content-center" href="{{ path('app_home')}}">
					<div class="sidebar-brand-icon rotate-n-15">
						<img src="{{ asset('img/ISFT-12.jpg') }}" alt="Logo" width="60" style="display: block; margin-left: auto; margin-right: 0;">
					</div>
					<div class="sidebar-brand-text mx-3">Instituto Local</div>
				</a>

				<!-- Divider -->
				<hr class="sidebar-divider my-0">

				<!-- Nav Item - HOLA! -->
				<li class="nav-item active">
					<a class="nav-link" href="{{ path('app_home')}}">
						<i class="fas fa-fw fa-tachometer-alt"></i>
						<span>HOLA!</span>
					</a>
				</li>

				<!-- Divider -->
				<hr class="sidebar-divider">

				<!-- Heading -->
				<div class="sidebar-heading">Menu</div>

				{% if is_granted ('ROLE_SUPER_ADMIN') or is_granted ('ROLE_ADMIN') %}
					<!-- Nav Item - Charts -->
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_user_index')}}">
							<i class="fas fa-fw fa-folder"></i>
							<span>Usuarios</span>
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_vistaspreinscriptos')}}">
							<i class="fas fa-fw fa-folder"></i>
							<span>Central Preinscriptos</span>
						</a>
					</li>
					
					<!-- Other items... -->

				{% endif %}

				<!-- Other sections... -->

			</ul>
			<!-- End of Sidebar -->

			<!-- Content Wrapper -->
			<div id="content-wrapper" class="d-flex flex-column">

				<!-- Main Content -->
				<div id="content">

					<!-- Topbar -->
					<nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

						<!-- Sidebar Toggle (Topbar) -->
						<button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
							<i class="fa fa-bars"></i>
						</button>

						<!-- Campo de búsqueda de ciclo lectivo -->
						<form class="form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
							<div class="input-group">
								<input id="ciclo-lectivo-input" type="text" class="form-control bg-light border-0 small" placeholder="Ciclo Lectivo - Cohorte..." aria-label="Search" aria-describedby="basic-addon2" value="" maxlength="4">
								<div class="input-group-append">
									<button class="button" onclick="filtrarPorCicloLectivo()">
										<i class="fas fa-search fa-sm"></i>
									</button>
								</div>
							</div>
						</form>

						<script>
							document.addEventListener("DOMContentLoaded", function() {
								console.log("DOM completamente cargado y parseado");
								
								// Obtener el año actual
								const currentYear = new Date().getFullYear();
								console.log("Año actual:", currentYear);

								// Establecer el valor del campo de ciclo lectivo con el año actual por defecto
								const inputCiclo = document.getElementById('ciclo-lectivo-input');
								console.log("Campo input encontrado:", inputCiclo);

								if (inputCiclo) {
									inputCiclo.value = currentYear;
									console.log("Valor asignado al input:", inputCiclo.value);

									// Solo permitir ingresar números y limitar a 4 dígitos
									inputCiclo.addEventListener('input', function() {
										// Eliminar cualquier carácter que no sea un número
										this.value = this.value.replace(/\D/g, '');
										// Limitar la longitud a 4 caracteres
										if (this.value.length > 4) {
											this.value = this.value.slice(0, 4);
										}
										console.log("Valor actual del input:", this.value);
									});
								} else {
									console.error("No se encontró el campo input ciclo lectivo.");
								}

								// Función para filtrar por ciclo lectivo y redirigir
								window.filtrarPorCicloLectivo = function() {
									const cicloLectivo = inputCiclo.value;
									// Validar que el ciclo lectivo tenga 4 dígitos
									if (cicloLectivo.length === 4) {
										// Redirigir a la misma página con el ciclo lectivo como parámetro en la URL
										window.location.href = `{{ path('app_vistascursada') }}?cicloLectivo=${cicloLectivo}`;
									} else {
										alert('Por favor, ingresa un ciclo lectivo válido de 4 dígitos.');
									}
								}
							});
						</script>

						<!-- Topbar Navbar -->
						<ul class="navbar-nav ml-auto" id="topbarToggle">

							<!-- Nav Item - Search Dropdown (Visible Only XS) -->
							<li class="nav-item dropdown no-arrow d-sm-none">
								<a class="nav-link dropdown-toggle" href="#" id="searchDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<i class="fas fa-search fa-fw"></i>
								</a>
								<!-- Dropdown - Messages -->
								<div class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in" aria-labelledby="searchDropdown">
									<form class="form-inline mr-auto w-100 navbar-search">
										<div class="input-group">
											<input type="text" class="form-control bg-light border-0 small" placeholder="Search for..." aria-label="Search" aria-describedby="basic-addon2">
											<div class="input-group-append">
												<button class="button" type="button">
													<i class="fas fa-search fa-sm"></i>
												</button>
											</div>
										</div>
									</form>
								</div>
							</li>

							<div class="topbar-divider d-none d-sm-block"></div>

							<!-- Nav Item - User Information -->
							<li class="nav-item dropdown no-arrow">
								<!-- User dropdown menu -->
							</li>

						</ul>

					</nav>
					<!-- End of Topbar -->

					<!-- Other content -->
				</div>
			</div>
		</div>
	</body>
</html>
